{"all_procs": {"procedure_1.csv": [["Item", "Trial Type", "Max Time", "Text", "Shuffle 1", ""], ["2", "poker", "user", "This is the start of a new experiment.", "off", ""], ["", "", "", "", "", ""]]}, "cond_array": [["Name", "Notes", "Stimuli", "Procedure", "fullscreen", "welcome", "participant_id", "end_message", "start_message", "buffer", ""], ["condition_1", "You can put more detailed notes in this field", "stimuli_1.csv", "procedure_1.csv", "off", "", "random", "", "", "5", ""], ["", "", "", "", "", "", "", "", "", "", ""]], "all_stims": {"stimuli_1.csv": [["Cue", "Answer", ""], ["A", "Apple", ""], ["B", "Banana", ""], ["", "", ""]]}, "procedure": null, "stimuli": null, "public_key": "/Egattu3LE/aSnwFHlRrEt0w51Y90CUhG4QR27jO/xA=", "save_script": "\"https://script.google.com/macros/s/AKfycbyMQS4T2DpGkq6Ue4IDaRVHKKuQXoOnCm0116m92hmQTfn-Syk/exec\"", "parsed_procs": {"procedure_1.csv": [{"": "", "item": "2", "trial type": "poker", "max time": "user", "text": "This is the start of a new experiment.", "shuffle 1": "off"}]}, "surveys": {}, "trialtypes": {"instruct": "<!--\r\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\r\n    A program for running experiments on the web\r\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\r\n\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU General Public License version 3 as published by\r\n    the Free Software Foundation.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU General Public License for more details.\r\n\r\n    You should have received a copy of the GNU General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n \t\t\r\n\t\tKitten release (2019) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\t\t\r\n*/\r\n-->\r\n<style>\r\n#instruct_text{\r\n  margin:auto;\r\n  width:500px;\r\n  padding:50px;\r\n  max-height:600px;\r\n  text-align: center;  \r\n}\r\n#proceed_button{\r\n  position:absolute;\r\n  right: 20px;\r\n}\r\n#trial_contents{\r\n  position: absolute;\r\n  top:0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin:auto;\r\n  width:600;\r\n  height:600;\r\n}\r\n</style>\r\n<div id=\"trial_contents\">\r\n  <div id=\"instruct_text\">{{text}}</div>\r\n  <div>\r\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\r\n  </div>\r\n</div>", "poker": "<style>\n#game{\n  position:relative;\n  margin:auto;\n  width:800px;\n  padding:50px;\n  height:800px;\n  text-align: center;  \n  display:none;  \n}\n#lobby{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n  display:none;  \n}\n#new_room_btn{\n  width:100%;\n}\n#table{\n  border-radius:350px;\n  background-color:green;\n  width:700px;\n  height:600px;\n}\n#welcome_screen{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n\n#player_1{\n  left:50px;\n  top:100px;\n}\n#player_2{\n  top:30px;\n  left:250px;\n}\n#player_3{\n  top:30px;\n  left:450px;\n}\n#player_4{\n  top:100px;\n  left:600px;\n}\n#player_5{\n  top:300px;\n  left:700px;\n}\n#player_6{\n  top:500px;\n  left:600px;\n}\n#player_7{\n  top:600px;\n  left:450px;\n}\n#player_8{\n  top:600px;\n  left:250px;\n}\n#player_9{\n  top:500px;\n  left:50px;\n}\n#player_10{\n  top:300px;\n  left:0px;\n}\n#your_cards{\n  position:absolute;\n  top:400px;\n  left:300px;\n}\n#your_bet{\n  position:absolute;\n  top:520px;\n  left:275px;\n}\n#middle_cards{\n  position:absolute;\n  top:250px;\n  left:150px;\n}\n.card{\n  width:100px;\n  height:100px;\n}\n.player_space{\n  position:absolute;\n  background-color: white;\n  border-style: solid;\n  border-radius: 10px;\n  padding: 10px;\n  \n}\n</style>\n<h1>Room Code:<span id=\"room_code_span\"></span></h1>\n<div id=\"welcome_screen\">\n  <h1 class=\"text-primary\">Texas Hold-em</h1>\n  <button class=\"btn btn-primary\" id=\"new_room_btn\">New room</button>\n  <br><br>\n  <div class=\"input-group mb-3\">\n    <div class=\"input-group-prepend\">\n      <span class=\"input-group-text\">Room code</span>\n    </div>\n    <input type=\"text\" class=\"form-control\" aria-label=\"room code\" id=\"room_code_input\">\n    <div class=\"input-group-append\">\n      <button class=\"input-group-text btn-primary\" id=\"join_btn\">Join</button>\n    </div>\n  </div>\n</div>\n<div id=\"lobby\">\n  <h1>Lobby</h1>\n  <div id=\"lobby_people\"></div>\n  <button class=\"btn btn-primary\" id=\"everybody_in_btn\">Everybody's in</button>\n</div>\n<div id=\"game\">\n  <div id=\"table\"></div>\n  <div id=\"player_0\" class=\"text-primary player_space\">player 0</div>\n  <div id=\"player_1\" class=\"text-primary player_space\">player 1</div>\n  <div id=\"player_2\" class=\"text-primary player_space\">player 2</div>\n  <div id=\"player_3\" class=\"text-primary player_space\">player 3</div>\n  <div id=\"player_4\" class=\"text-primary player_space\">player 4</div>\n  <div id=\"player_5\" class=\"text-primary player_space\">player 5</div>\n  <div id=\"player_6\" class=\"text-primary player_space\">player 6</div>\n  <div id=\"player_7\" class=\"text-primary player_space\">player 7</div>\n  <div id=\"player_8\" class=\"text-primary player_space\">player 8</div>\n  <div id=\"player_9\" class=\"text-primary player_space\">player 9</div>\n  <div id=\"middle_cards\">\n    <table>\n      <tr>\n        <td>\n          <img id=\"middle_1\" class=\"card\" src=\"../User/Stimuli/Cards/back-red.png\" />\n        </td>\n        <td>\n          <img id=\"middle_2\" class=\"card\" src=\"../User/Stimuli/Cards/back-red.png\" />\n        </td>\n        <td>\n          <img id=\"middle_3\" class=\"card\" src=\"../User/Stimuli/Cards/back-red.png\" />\n        </td>\n        <td>\n          <img id=\"middle_4\" class=\"card\" src=\"../User/Stimuli/Cards/back-red.png\" />\n        </td>\n        <td>\n          <img id=\"middle_5\" class=\"card\" src=\"../User/Stimuli/Cards/back-red.png\" />\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div id=\"your_cards\">\n    <table>\n      <tr>\n        <td>\n          <img id=\"card_1\" class=\"card\"/>\n        </td>\n        <td>\n          <img id=\"card_2\" class=\"card\"/>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div id=\"your_bet\">\n    <button class=\"btn btn-danger\" id=\"fold_btn\">Fold</button>\n    <button class=\"btn btn-danger\" id=\"check_call_btn\">Check</button>\n    <div class=\"input-group mb-3\">\n      <input type=\"text\" class=\"form-control\" aria-label=\"raise_btn\" id=\"raise_input\">\n      <div class=\"input-group-append\">\n        <button class=\"input-group-text btn-raise\" id=\"raise_btn\">Raise</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<script>\nsettings={\n  collector_code: \"tbc\",\n  player_name: \"tbc\",\n  this_room: \"tbc\",\n  raw_deck: {},\n  player_cards:{},\n  table_cards:[]\n}\nphase = \"welcome\",\n\nphases = [\n  \"welcome\",\n  \"lobby\",\n  \"playing\"\n]\n\n/*\nto do list\n- prevent a player stealing another player's name...?\n*/\n\n/////////////\n// Actions //\n/////////////\n$(\"#join_btn\").on(\"click\",function(){\n  settings.this_room = master_sheet.filter(function(row){\n    return row.roomcode == $(\"#room_code_input\").val();\n  })[0];\n  if(typeof(settings.this_room) == \"undefined\"){\n    bootbox.alert(\"That's not a recognised room code\");\n  } else {\n    settings.collector_code = settings.this_room.collectorcode;\n    bootbox.prompt(\"What (nick)name do you want to use?\",function(player_name){\n      player_name = player_name.toUpperCase();\n      settings.player_name = player_name;\n      var data = {\n        action: \"join\",\n        collector_code: settings.collector_code,\n        player_name: player_name,\n      }\n      $.ajax({\n        type: 'POST',\n        url: \"https://script.google.com/macros/s/AKfycbzdLP0pkgsZ_iKKMER7ZyM6_jnguMa3FZXIorz2aVfjkG8v6Dc/exec\",\n        data: data,\n        crossDomain: true,\n        timeout: 120000,\n        success:function(result){\n          //as it stands, this will never happen as Collector doesn't allow posts to it.\n        }\n      })\n      .catch(function(error){\n        //read the google sheet \n        /*\n        ParseGSX.parseGSX(data.question_id,function(result){\n          show_question(result);\n        });\n        */\n      });\n    });    \n  }\n});\n$(\"#everybody_in_btn\").on(\"click\",function(){\n  var data = {\n      action: \"everybody_in\",\n      collector_code: settings.collector_code,\n    }\n    $.ajax({\n      type: 'POST',\n      url: \"https://script.google.com/macros/s/AKfycbzdLP0pkgsZ_iKKMER7ZyM6_jnguMa3FZXIorz2aVfjkG8v6Dc/exec\",\n      data: data,\n      crossDomain: true,\n      timeout: 120000,\n      success:function(result){\n        //as it stands, this will never happen as Collector doesn't allow posts to it.\n      }\n    })\n    .catch(function(error){\n      //read the google sheet \n      /*\n      ParseGSX.parseGSX(data.question_id,function(result){\n        show_question(result);\n      });\n      */\n    });\n});\n$(\"#new_room_btn\").on(\"click\",function(){\n  settings.collector_code = makeid(12);\n  bootbox.prompt(\"What (nick)name do you want to use?\",function(player_name){\n    settings.player_name = player_name.toUpperCase();\n    var data = {\n      action: \"create_room\",\n      collector_code: settings.collector_code,\n      player_name: player_name,\n    }\n    $.ajax({\n      type: 'POST',\n      url: \"https://script.google.com/macros/s/AKfycbzdLP0pkgsZ_iKKMER7ZyM6_jnguMa3FZXIorz2aVfjkG8v6Dc/exec\",\n      data: data,\n      crossDomain: true,\n      timeout: 120000,\n      success:function(result){\n        //as it stands, this will never happen as Collector doesn't allow posts to it.\n      }\n    })\n    .catch(function(error){\n      //read the google sheet \n      /*\n      ParseGSX.parseGSX(data.question_id,function(result){\n        show_question(result);\n      });\n      */\n    });\n  });\n});\n$(\"#room_code_input\").on(\"input\",function(){\n  $(this).val($(this).val().toUpperCase());\n});\n\nplayer_obj = {\n  name:\"tbc\",\n  amount:-1,\n  wipeouts:0,\n  current_round:-1\n}\n\n\nhands = {\n  \"high_card\":{\n    rank:0\n  },\n  \"pair\":{\n    rank:1\n  },\n  \"2_pair\":{\n    rank:2\n  },\n  \"3_kind\":{\n    rank:3\n  },\n  \"straight\":{\n    rank:4\n  },\n  \"flush\":{\n    rank:5\n  },\n  \"full_house\":{\n    rank:6\n  },\n  \"4_kind\":{\n    rank:7\n  },\n  \"straight_flush\":{\n    rank:8\n  }\n}\n\n\n//based on solution by csharptest.net at https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript\nfunction makeid(length) {\n  var result           = '';\n  var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmonpqrstuvwxyz1234567890';\n  var charactersLength = characters.length;\n  for ( var i = 0; i < length; i++ ) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n//based on code found at: https://raw.githubusercontent.com/drumwolf/parse-gsx/0ba67bf115eac96e0763777a4fb2c485a35e2daa/parse-gsx-ajax.js\nvar ParseGSX = (function() {\n  var _defaultCallback = function(data) {\n    console.log(data);\n  };\n  var _parseRawData = function(res) {\n    var finalData = [];\n    res.feed.entry.forEach(function(entry){\n      var parsedObject = {};\n      for (var key in entry) {\n        if (key.substring(0,4) === \"gsx$\") {\n          parsedObject[key.slice(4)] = entry[key][\"$t\"];\n        }\n      }\n      finalData.push(parsedObject);\n    });\n    var processGSXData = _defaultCallback;\n    processGSXData(finalData);\n  };\n  var parseGSX = function(spreadsheetID, callback) {\n    var url = \"https://spreadsheets.google.com/feeds/list/\" + spreadsheetID + \"/od6/public/values?alt=json\";\n    var ajax = $.get(url);\n    if (callback) { _defaultCallback = callback; }\n    $.when(ajax).then(_parseRawData);\n  };\n  return { parseGSX: parseGSX };\n})();\n\n$(\"#fold_btn\").on(\"click\",function(){\n  var data = {\n    action: \"fold\",\n    collector_code: settings.collector_code,\n    player_name: settings.player_name,\n  }\n  $.ajax({\n    type: 'POST',\n    url: \"https://script.google.com/macros/s/AKfycbzdLP0pkgsZ_iKKMER7ZyM6_jnguMa3FZXIorz2aVfjkG8v6Dc/exec\",\n    data: data,\n    crossDomain: true,\n    timeout: 120000,\n    success:function(result){\n      //as it stands, this will never happen as Collector doesn't allow posts to it.\n    }\n  })\n  .catch(function(error){\n    //read the google sheet \n    /*\n    ParseGSX.parseGSX(data.question_id,function(result){\n      show_question(result);\n    });\n    */\n  });\n});\n\nfunction update_players(){\n  function update_your_cards(roomobj){\n    var your_player = roomobj.players[settings.player_name];\n    //var card_1 = ;\n    if(typeof(your_player) !== \"undefined\" &&\n       typeof(your_player.current_hand) !== \"undefined\" &&\n       typeof(your_player.current_hand[0]) !== \"undefined\"){\n      $(\"#card_1\").attr(\"src\",\"../User/Stimuli/Cards/\" + your_player.current_hand[0].card_file);\n      $(\"#card_2\").attr(\"src\",\"../User/Stimuli/Cards/\" + your_player.current_hand[1].card_file);\n      \n      //if your turn, allow you to bid\n      if(your_player.current_bid == \"your turn\"){\n        $(\"#fold_btn\").attr(\"disabled\",false);\n        $(\"#check_call_btn\").attr(\"disabled\",false);\n        $(\"#raise_input\").attr(\"disabled\",false);\n        $(\"#raise_btn\").attr(\"disabled\",false);\n      } else {\n        $(\"#fold_btn\").attr(\"disabled\",true);\n        $(\"#check_call_btn\").attr(\"disabled\",true);\n        $(\"#raise_input\").attr(\"disabled\",true);\n        $(\"#raise_btn\").attr(\"disabled\",true);\n      }\n      \n      \n      \n    }\n  }\n  var roomobj = JSON.parse(settings.this_room.roomobj);\n  for(var i = 0; i< 10; i++){\n    var this_player = Object.keys(roomobj.players).filter(function(player){\n      return roomobj.players[player].player_no == i\n    })[0];\n    if(typeof(this_player) == \"undefined\"){\n      $(\"#player_\" + i).hide();\n    } else {\n      var player_html = \"<h6>\" + this_player + \"</h6>\" +\n                        \"<h6>Chips: \" + roomobj.players[this_player].chips + \"</h6>\" +\n                        \"<h6>Bet: \"   + roomobj.players[this_player].current_pot + \"</h6>\" +\n                        \"<h6>Status: \"   + roomobj.players[this_player].current_bid + \"</h6>\";\n      $(\"#player_\" + i).html(player_html);\n      if(this_player == settings.player_name){\n        $(\"#player_\" + i).removeClass(\"text-primary\");\n        $(\"#player_\" + i).addClass(\"text-danger\");\n      }\n      update_your_cards(roomobj);\n      \n    }\n  }\n}\n\nvar master_sheet;\nfunction sheet_check(){\n  ParseGSX.parseGSX(\"1lp9SwAtHytTGCJFfTkA9VUDz1mEk3Oez2xlDFapPt8g\",function(quest_array){\n    master_sheet = quest_array;\n    settings.this_room = master_sheet.filter(function(row){\n      return row.collectorcode == settings.collector_code;\n    })[0];\n    switch(phase){\n      case \"welcome\":\n        \n        \n        if(typeof(settings.this_room) !== \"undefined\"){\n          phase = \"lobby\";\n          $(\"#welcome_screen\").hide();\n          $(\"#lobby\").fadeIn(1000);\n        }\n        //if(master_sheet)\n        setTimeout(function(){\n          sheet_check();\n        },1000);\n        break;\n      case \"lobby\":\n        var lobby_people_html = \"\";\n        \n        for(var i = 0; i < 10; i++){\n          if(settings.this_room[\"player\"+i] !== \"\"){\n            lobby_people_html += \"<h2 class='text-primary'>\" + settings.this_room[\"player\"+i] + \"</h2>\";\n          }\n        }\n        $(\"#lobby_people\").html(lobby_people_html);\n        $(\"#room_code_span\").html(settings.this_room.roomcode);\n\n        if(settings.this_room.everybodyin == \"TRUE\"){\n          phase = \"playing\";\n          $(\"#lobby\").hide();\n          $(\"#game\").fadeIn(1000);\n          update_players();\n        }\n        setTimeout(function(){\n          sheet_check();\n        },1000);\n        break;\n      case \"playing\":\n        update_players(); \n        setTimeout(function(){\n          sheet_check();\n        },1000);\n        break;\n    }\n  });\n}\nsheet_check();\n</script>"}, "python_procs": {"procedure_1.csv": "Item,Trial Type,Max Time,Text,Shuffle 1,\r\n2,poker,user,This is the start of a new experiment.,off,\r\n,,,,,"}, "python_conditions": "Name,Notes,Stimuli,Procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,random,,,5,\r\n,,,,,,,,,,", "python_stims": {"stimuli_1.csv": "Cue,Answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"}, "conditions": [{"name": "condition_1", "notes": "You can put more detailed notes in this field", "stimuli": "stimuli_1.csv", "procedure": "procedure_1.csv", "fullscreen": "off", "welcome": "", "participant_id": "random", "end_message": "", "start_message": "", "buffer": "5", "": ""}]}